<?xml version="1.0" encoding="ASCII" ?>
<!--
 *************************************************************************
 * Copyright (c) 2004, 2005 Actuate Corporation.
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v2.0.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 *
 * Contributors:
 *  Actuate Corporation  - initial API and implementation
 *  
 *************************************************************************
 *
 *  EclipseDownloadSetup.xml
 *
 *  Created on 04/11/2005
 *  Create package file (zip) for download.eclipse.org.
 *
 * 
 * The following are public targets callable by external users. 
 * 
 * default  create and upload the packages.
 * DownLoadSetup create the packages.
 * upload2eclipse.org upload the packages.

 * Usage:
 *    ant [any one or more of the public targets] 
 *	  - -file EclipseDownloadSetup.xml 
 *    -logfile adb.log 
 *
 *
 * Notes:
 *
 * Change History:
 *
 *    1. 05/16/2005: initial version
 *
 *
-->

<project name="EclipseDownloadSetup For BIRT Release 2.2" default="default" basedir=".">



	<tstamp prefix="timestamp">
		<format property="TODAY_MIN" pattern="yyyyMMddHHMM" />
		<format property="TODAY" pattern="yyyyMMdd" />
	</tstamp>


	<!--Define the build type-->
    <property name="checkout.version" value=""/>
	<property name="BuildType" value="Nightly" />
	<property name="NightlyBuild" value="N" />
	<property name="StableBuild" value="S" />
	<property name="RCBuild" value="S" />

	<property name="birt.info" value="build_info.txt" />

	<!--Property for Zip file prefix-->
	<property name="ZipPrefix" value="eclipse/plugins" />
	<property name="FeautrePrefix" value="eclipse/features" />

	
	<property name="viewer.version" value="${org.eclipse.birt.report.viewer.plugin.version}" />
	<property name="package.version" value="2_2_0" />
	<property name="sdk.zip.name" value="birt-report-framework-sdk-${package.version}.zip" />
	<property name="framework.zip.name" value="birt-report-framework-${package.version}.zip" />
	<property name="allinone.zip.name" value="birt-report-designer-all-in-one-${package.version}.zip" />
	<property name="allinone.linux.zip.name" value="birt-report-designer-all-in-one-${package.version}-linux-gtk.tar" />
	<property name="runtime.zip.name" value="birt-runtime-${package.version}.zip" />
	<property name="wtp.runtime.zip.name" value="birt.zip" />
	<property name="charts.zip.name" value="birt-charts-${package.version}.zip" />
	<property name="iportal.lib.name" value="iportal-library.zip" />
	<property name="wtp.integration.zip.name" value="birt-wtp-integration-sdk-${package.version}.zip"/>
	
	<property name="runtime.tmp" value="${OutputDir}/runtime_tmp" />
	<property name="war.tmp" value="${OutputDir}/war_tmp" />
	<property name="chart.tmp" value="${OutputDir}/chart_tmp" />
	<property name="package.files.dir" value="${baseLocation}/../PackageFiles"/>
	<property name="template.dir" value="${package.files.dir}/template" />
	<property name="all.in.one.file.dir" value="${package.files.dir}/AllInOne"/>
	<property name="RCP.static.file.dir" value="${package.files.dir}/RCP" />
	
	<property name="iportal.tmp" value="${OutputDir}/iportal_tmp" />
	
	<property name="birt.runtime.dir.prefix" value="birt-runtime-${package.version}" />
	<property name="chart.sdk.dir.prefix" value="birt-charts-${package.version}" />
	<property name="birt.rcp.dir.prefix" value="birt-rcp-report-designer-${package.version}" />
		
	<property name="birt.rcp.zip.name" value="birt-rcp-report-designer-${package.version}.zip" />
	<property name="birt.source.zip.name" value="birt-source-${package.version}.zip" />	
	<property name="sample.plugin.zip.name" value="birt-sample-plugins-${package.version}.zip" />

	<property name="nl.group1.zip.name.allinone" value="NLpack1-birt-report-designer-all-in-one-${package.version}.zip" />
	<property name="nl.group1.zip.name.runtime"  value="NLpack1-birt-runtime-${package.version}.zip" />
	<property name="nl.group1.zip.name.chart"  value="NLpack1-birt-charts-${package.version}.zip" />
	<property name="nl.group1.zip.name.RCP"  value="NLpack1-birt-rcp-report-designer-${package.version}.zip" />
	<property name="nl.group1.zip.name.framework"  value="NLpack1-birt-report-framework-${package.version}.zip" />
	
	<property name="nl.group1.overlay.zip.name.SDK"  value="NLpack1_FeatureOverlay-birt-report-all-in-one-${package.version}.zip" />
	<property name="nl.group1.overlay.zip.name.RCP"  value="NLpack1_FeatureOverlay-birt-rcp-report-designer-${package.version}.zip" />
	<property name="nl.group1.overlay.zip.name.Framework"  value="NLpack1_FeatureOverlay-birt-report-framework-${package.version}.zip" />
	<property name="nl.group1.overlay.zip.name.Chart"  value="NLpack1_FeatureOverlay-birt-charts-${package.version}.zip" />
	
	<target name="default">
		<antcall target="DownLoadSetup" />
	</target>

	<!--  Set up download pages -->
	<target name="DownLoadSetup">

		<echo message="DownloadPage Setup starts at ${timestamp.TODAY_MIN}" />
		<echo message="Copy log files to deposit" />

		<echo file="${OutputDir}\chart_build_log.txt">
         BIRT Chart: Build log for build   ${univBuildDate}
         ===================================================         
		</echo>

		<echo file="${OutputDir}\designer_build_log.txt" >
        BIRT Designer: Build log for build   ${univBuildDate}
         ===================================================         
		</echo>

		<echo file="${OutputDir}\data_build_log.txt">
         BIRT Data: Build log for build   ${univBuildDate}         
         ===================================================         
		</echo>

		<echo file="${OutputDir}\engine_build_log.txt">
         BIRT Engine: Build log for build   ${univBuildDate}
         ===================================================         
		</echo>

		<echo file="${OutputDir}\model_build_log.txt">
        BIRT Model: Build log for build   ${univBuildDate}
         ===================================================         
		</echo>
		
		<copy file="${template.dir}\build_info_template_new.txt" tofile="${OutputDir}\${birt.info}" overwrite="true" failonerror="false" />
		
		<!--Define chart runtime file set.-->
		<patternset id="chart.runtime.jars">
			<include name="org.eclipse.birt.chart.engine_*.jar" />
			<include name="org.eclipse.birt.chart.engine.extension_*.jar" />
			<include name="org.eclipse.birt.chart.device.extension_*.jar" />
			<include name="org.eclipse.birt.core_*.jar" />
			<include name="org.eclipse.birt.chart.engine_*.jar" />
			<include name="org.eclipse.birt.chart.device.svg_*.jar" />
		</patternset>


		<!--Define the engine runtime plugins-->
		<patternset id="chart.runtime.plugins">
			<include name="org.eclipse.birt.chart.device.extension*.jar" />
			<include name="org.eclipse.birt.chart.device.svg*.jar" />
			<include name="org.eclipse.birt.chart.device.swt*.jar" />
			<include name="org.eclipse.birt.chart.engine.extension*.jar" />
			<include name="org.eclipse.birt.chart.engine*.jar" />
			<include name="org.eclipse.birt.chart.runtime_*/**" />
			<include name="org.eclipse.birt.chart.ui.extension*.jar" />
			<include name="org.eclipse.birt.chart.ui*.jar" />
			<include name="org.eclipse.birt.chart_*/**" />
			<include name="org.eclipse.birt.core_*.jar" />
			<include name="org.eclipse.birt.core.ui_*.jar" />
			<include name="org.eclipse.birt.doc*.jar" />
			<include name="org.mozilla.rhino*/**" />
			<include name="org.apache.commons.codec*/**" />
			<include name="org.eclipse.birt.doc*.jar" />
			<include name="org.eclipse.birt.chart.cshelp*/**"/>
			<include name="org.eclipse.birt.chart.doc.isv*/**"/>
            <include name="org.eclipse.birt.chart.examples_*.jar"/>
		</patternset>

		<!--Define the engine runtime plugins-->
		<patternset id="engine.runtime.plugins">
			<include name="org.eclipse.birt.chart.device.extension*.jar" />
			<include name="org.eclipse.birt.chart.engine.extension*.jar" />
			<include name="org.eclipse.birt.chart.reportitem*.jar" />
			<include name="org.eclipse.birt.report.data.oda.jdbc*.jar" />
			<include name="org.eclipse.birt.report.data.oda.sampledb*.jar" />
			<include name="org.eclipse.birt.report.engine.emitter.pdf*.jar" />
			<include name="org.eclipse.birt.report.engine.emitter.html*.jar" />
		</patternset>

		<!--Define the engine runtime file set-->
		<patternset id="engine.runtime.jars">
			<include name="org.eclipse.birt.report.engine*/engine.jar" />
			<include name="org.eclipse.birt.data.oda*/oda.jar" />
			<include name="org.eclipse.birt.data*/dte.jar" />
			<include name="org.eclipse.birt.core*/core.jar" />
			<include name="org.eclipse.birt.report.model*/model.jar" />
		</patternset>
		
		<!-- Define the Orbit project jars -->
		<patternset id="orbit.include.jars">
			<include name="org.apache.xerces_*.jar" />
			<include name="org.apache.xml.resolver_*.jar" />
			<include name="org.w3c.dom_*.jar"/>
			<include name="org.apache.batik.*jar"/>
			<include name="org.w3c.dom.svg_*.jar"/>
			<include name="org.w3c.dom.smil_*.jar"/>
			<include name="org.w3c.css.sac_*.jar"/>
		</patternset>
		<!--Exclude jar file pattern set-->

		<patternset id="exclude.jars">
			<exclude name="**/jtds-0.9.jar" />
			<exclude name="**/db2jcc.jar" />
			<exclude name="**/db2jcc_license_c.jar" />
			<exclude name="**/db2jcc_license_cu.jar" />
			<exclude name="**/ifxjdbc.jar" />
			<exclude name="**/jtds-0.9.jar" />
			<exclude name="**/mysql-connector-java-3.0.16-ga-bin.jar" />
			<exclude name="**/ojdbc14.jar" />
			<exclude name="**/postgresql-8.0-310.jdbc3.jar" />
			<exclude name="**/JimiProClasses.zip" />
			<exclude name="**/org.eclipse.birt.data*/**/castor-0.9.5.4-xml.jar" />
			<exclude name="**/org.eclipse.birt.data*/**/derbynet.jar" />
			<exclude name="**/org.eclipse.birt.data*/**/js.jar" />
			<exclude name="**/org.eclipse.birt.data*/**/osgi.jar" />
			<exclude name="**/org.eclipse.birt.data*/**/runtime.jar" />
			<exclude name="**/org.eclipse.birt.data*/**/xercesImpl.jar" />
			<exclude name="**/org.eclipse.birt.data*/**/xml-apis.jar" />
			<exclude name="**/junit.jar" />
			<exclude name="**/hsqldb.jar"/>
			<exclude name="**/itext*.jar"/>
            <exclude name="**/iText*.jar"/>
			<exclude name="**/common.jar"/>
			<exclude name="**/common.resources.jar"/>
			<exclude name="**/org.eclipse.datatools.connectivity.oda*/lib/birt-core.jar"/>
		</patternset>

		<antcall target="createBirtFramework" />

		<antcall target="createBirtRuntime" />

		<!--antcall target="createTestSuite" /-->
		
		<antcall target="createSamplePlugin" />
		
		<antcall target="createBirtRCP" />
		
		<antcall target="createChartRuntime" />
		
		<antcall target="createDatabase" />

		<antcall target="createAllInOne" />

		<antcall target="createAllInOneForLinux" />
		
		<antcall target="createBirtSDK"/>

        <antcall target="createWTPIntegration"/>
		
		<antcall target="createBirtSourceBuild"/>

		<replace file="${OutputDir}\${birt.info}" token="#buildType#" value="Nightly"/>
		<replace file="${OutputDir}\${birt.info}" token="#timeStamp#" value="${buildId}"/>
		<replace file="${OutputDir}\${birt.info}" token="#branch#" value="2.2.0"/>
	
	</target>

	<target name="createBirtNLFeatureOverlay">
		<antcall target="createNLGroup1FeatureOverlayChart" />
		<antcall target="createNLGroup1FeatureOverlayFramework" />
		<antcall target="createNLGroup1FeatureOverlayRCP" />
		<antcall target="createNLGroup1FeatureOverlaySDK" />
	</target>
		
	<target name="createBirtSDK">
		<!--  Make BIRT SDK ZIP file-->
		<zip destfile="${OutputDir}/${sdk.zip.name}">
			<zipfileset dir="${deposit}/eclipse/plugins" prefix="${ZipPrefix}">
				<include name="**/*" />
				<exclude name="**/org.eclipse.birt.report.designer.ui.rcp*/**" />
				<exclude name="**/org.eclipse.birt.report.designer.ui.samples.rcp_*/**" />
				<exclude name="**/org.eclipse.birt.sample.reportitem.rotatedtext*.jar" />
				<exclude name="org.eclipse.birt.thirdparty*/**"/>
				<patternset refid="exclude.jars" />
			</zipfileset>
			<zipfileset dir="${deposit}/eclipse/features" prefix="${FeautrePrefix}">
				<include name="**/*" />
				<exclude name="org.eclipse.birt.thirdparty*/**"/>
				<exclude name="org.eclipse.birt.rcp*/**"/>
			</zipfileset>
			<zipfileset dir="${all.in.one.file.dir}/eclipse/plugins" prefix="${ZipPrefix}">
				<include name="org.eclipse.datatools*/**" />
				<include name="org.eclipse.datatools*.jar" />
				<patternset refid="orbit.include.jars" />
			</zipfileset>
			<zipfileset dir="${all.in.one.file.dir}/eclipse/features" prefix="${FeautrePrefix}">
				<include name="org.eclipse.datatools*/*" />
			</zipfileset>
			<zipfileset dir="${template.dir}/legal" prefix="eclipse">
				<include name="**/*" />
			</zipfileset>
		</zip>
	</target>

	<target name="createBirtFramework">
		<!--  Make birt framework ZIP file-->
		<!-- Exclude SDK feature and corresponding plug-ins-->

		<zip destfile="${OutputDir}/${framework.zip.name}">
			<zipfileset dir="${deposit}/eclipse/plugins" prefix="${ZipPrefix}">
				<include name="**/*" />
				<exclude name="**/org.eclipse.birt.report.designer.ui.rcp*/**" />
				<exclude name="**/org.eclipse.birt.report.designer.ui.samples.rcp_*/**" />
				<exclude name="org.eclipse.birt.integration.wtp*/**"/>
				<exclude name="org.eclipse.birt.sample.reportitem.rotatedtext*/**" />
				<exclude name="org.eclipse.birt.sdk*/**" />
				<exclude name="*.source_*/**" />
				<exclude name="org.eclipse.birt.report.viewer_*/birt/ajax/**" />
				<exclude name="org.eclipse.birt.thirdparty*/**"/>
				<patternset refid="exclude.jars" />
			</zipfileset>
			<zipfileset dir="${deposit}/eclipse/features" prefix="${FeautrePrefix}">
				<include name="**/*" />
				<exclude name="org.eclipse.birt.sdk*/**" />
				<exclude name="org.eclipse.birt*source*/**" />
				<exclude name="org.eclipse.birt.integration.wtp*/**"/>
				<exclude name="org.eclipse.birt.thirdparty*/**"/>
				<exclude name="org.eclipse.birt.rcp*/**"/>
			</zipfileset>
			<zipfileset dir="${all.in.one.file.dir}/eclipse/plugins" prefix="${ZipPrefix}">
				<include name="org.eclipse.datatools*/**" />
				<include name="org.eclipse.datatools*.jar" />
				<patternset refid="orbit.include.jars" />
			</zipfileset>
			<zipfileset dir="${all.in.one.file.dir}/eclipse/features" prefix="${FeautrePrefix}">
				<include name="org.eclipse.datatools*/*" />
			</zipfileset>
			<zipfileset dir="${template.dir}/legal" prefix="eclipse">
				<include name="**/*" />
			</zipfileset>
		</zip>
	</target>

	<target name="createIpotalLib">
		<property file="${buildDirectory}/finalPluginsVersions.properties"/>
		<copy todir="${iportal.tmp}">
			<fileset dir="${baseLocation}/plugins" />
			<mapper type="regexp"  from="org.eclipse.core.contenttype_.*.jar" to="org.eclipse.core.contenttype.jar"/>
		</copy>
		<copy todir="${iportal.tmp}">
			<fileset dir="${baseLocation}/plugins" />
			<mapper type="regexp"  from="org.eclipse.core.jobs_.*.jar" to="org.eclipse.core.jobs.jar"/>
		</copy>
		<copy todir="${iportal.tmp}">
			<fileset dir="${baseLocation}/plugins" />
			<mapper type="regexp"  from="org.eclipse.core.runtime.compatibility_.*.jar" to="org.eclipse.core.runtime.compatibility.jar"/>
		</copy>
		<copy todir="${iportal.tmp}">
			<fileset dir="${baseLocation}/plugins" />
			<mapper type="regexp"  from="org.eclipse.core.runtime_.*.jar" to="org.eclipse.core.runtime.jar"/>
		</copy>
		<copy todir="${iportal.tmp}">
			<fileset dir="${baseLocation}/plugins" />
			<mapper type="regexp"  from="org.eclipse.datatools.connectivity.oda.design_.*.jar" to="org.eclipse.datatools.connectivity.oda.design.jar"/>
		</copy>
		<copy todir="${iportal.tmp}">
			<fileset dir="${baseLocation}/plugins" />
			<mapper type="regexp"  from="org.eclipse.datatools.connectivity.oda_.*.jar" to="org.eclipse.datatools.connectivity.oda.jar"/>
		</copy>
		<copy todir="${iportal.tmp}">
			<fileset dir="${baseLocation}/plugins" />
			<mapper type="regexp"  from="org.eclipse.emf_.*.jar" to="org.eclipse.emf.jar"/>
		</copy>
		<copy todir="${iportal.tmp}">
			<fileset dir="${baseLocation}/plugins" />
			<mapper type="regexp"  from="org.eclipse.equinox.common_.*.jar" to="org.eclipse.equinox.common.jar"/>
		</copy>
		<copy todir="${iportal.tmp}">
			<fileset dir="${baseLocation}/plugins" />
			<mapper type="regexp"  from="org.eclipse.equinox.preferences_.*.jar" to="org.eclipse.equinox.preferences.jar"/>
		</copy>
		<copy todir="${iportal.tmp}">
			<fileset dir="${baseLocation}/plugins" />
			<mapper type="regexp"  from="org.eclipse.equinox.registry_.*.jar" to="org.eclipse.equinox.registry.jar"/>
		</copy>
		<copy todir="${iportal.tmp}">
			<fileset dir="${baseLocation}/plugins" />
			<mapper type="regexp"  from="org.eclipse.osgi_.*.jar" to="org.eclipse.osgi.jar"/>
		</copy>
		<copy tofile="${iportal.tmp}/org.eclipse.birt.report.model.adapter.oda.jar"  	
			file="${deposit}/eclipse/plugins/org.eclipse.birt.report.model.adapter.oda_${org.eclipse.birt.report.model.adapter.oda}.jar"/>
		<zip destfile="${OutputDir}/${iportal.lib.name}">
			<zipfileset dir="${iportal.tmp}" >
				<include name="**/*"/>
			</zipfileset>
            <!-- include nl bundles except designers into ipotal packages -->
            <zipfileset dir="${deposit}/language_pack/plugins" >
				<include name="*.nl*.jar"/>
                <exclude name="*.designer.*nl*.jar"/>
				<exclude name="*debug.ui*nl*.jar"/>
			</zipfileset>
		</zip>
		<delete dir="${iportal.tmp}"/>
	</target>
	
	<target name="createAllInOne">
		<!--  Make birt all-in-one ZIP file-->
		<zip destfile="${OutputDir}/${allinone.zip.name}">
			<zipfileset dir="${deposit}/eclipse/plugins" prefix="${ZipPrefix}">
				<include name="**/*" />
				<exclude name="org.eclipse.birt.report.designer.ui.rcp*/**" />
				<exclude name="org.eclipse.birt.report.designer.ui.samples.rcp_*/**" />
				<exclude name="org.eclipse.birt.sample.reportitem.rotatedtext*/**" />
				<exclude name="org.eclipse.datatools.connectivity_*/**"/>
				<exclude name="org.eclipse.datatools.connectivity.ui_*/**"/>
				<exclude name="org.eclipse.birt.thirdparty*/**"/>
				<exclude name="*.source_*/**" />
				<exclude name="org.eclipse.birt.sdk_*.jar" />
				<patternset refid="exclude.jars" />
			</zipfileset>
			<zipfileset dir="${deposit}/eclipse/features" prefix="${FeautrePrefix}">
				<include name="**/*" />
				<exclude name="*.source_*/**" />
				<exclude name="org.eclipse.birt.thirdparty*/**"/>
				<exclude name="org.eclipse.birt.sdk*/**" />
				<exclude name="org.eclipse.birt.rcp*/**" />
			</zipfileset>
			<zipfileset dir="${template.dir}/legal" prefix="eclipse">
				<include name="**/*" />
			</zipfileset>
			<zipfileset dir="${all.in.one.file.dir}">
				<include name="**/*" />
			</zipfileset>
		</zip>
	</target>
	<!-- - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - -
	This target is used for create All-In-One package for Linux
	- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
	<target name="createAllInOneForLinux">
		<!--  Make birt all-in-one ZIP file-->

		<tar destfile="${OutputDir}/${allinone.linux.zip.name}" longfile="gnu">
			<tarfileset dir="${deposit}/eclipse/plugins" prefix="${ZipPrefix}">
				<include name="**/*" />
				<exclude name="**/org.eclipse.birt.report.designer.ui.rcp*/**" />
				<exclude name="**/org.eclipse.birt.report.designer.ui.samples.rcp_*/**" />
				<exclude name="org.eclipse.birt.sample.reportitem.rotatedtext*/**" />
				<exclude name="org.eclipse.datatools.connectivity_*/**"/>
				<exclude name="org.eclipse.datatools.connectivity.ui_*/**"/>
				<exclude name="*.source_*/**" />
				<exclude name="org.eclipse.birt.sdk_*.jar" />
				<exclude name="org.eclipse.birt.thirdparty*/**"/>
				<patternset refid="exclude.jars" />
			</tarfileset>
			<tarfileset dir="${deposit}/eclipse/features" prefix="${FeautrePrefix}">
				<include name="**/*" />
				<exclude name="*.source_*/**" />
				<exclude name="org.eclipse.birt.sdk*/**" />
				<exclude name="org.eclipse.birt.thirdparty*/**"/>
				<exclude name="org.eclipse.birt.rcp*/**"/>
			</tarfileset>
			<tarfileset dir="${template.dir}/legal" prefix="eclipse">
				<include name="**/*" />
			</tarfileset>
			<tarfileset dir="${all.in.one.file.dir}-Linux">
				<include name="**/*" />
			</tarfileset>
		</tar>
		<gzip src="${OutputDir}/${allinone.linux.zip.name}" destfile="${OutputDir}/${allinone.linux.zip.name}.gz"/>
		<delete file="${OutputDir}/${allinone.linux.zip.name}"/>
	</target>
	
	<!-- - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - -
	This target is used for create birt.zip for integration.wtp.ui
	- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
	<target name="createWebViewerExample">
		<copy todir="${runtime.tmp}">
			<fileset dir="${deposit}/birt_web/org.eclipse.birt.report.viewer/birt_web">
				<patternset refid="exclude.jars" />
			    <exclude name="plugins/**"/>
				<exclude name="images/**" />
				<exclude name="pages/**" />
				<exclude name="styles/**" />
				<exclude name="**/*.nl1_*/**"/>
				<exclude name="**/*.nl/**" />
				<exclude name="**/*.nl1_*.jar"/>
				<exclude name="**/org.eclipse.datatools.connectivity*finfo*.jar" />
				<exclude name="**/org.eclipse.datatools.connectivity*design*.jar"/>
				<exclude name="**/org.eclipse.datatools.connectivity*.ui*.jar"/>
				<exclude name="**/org.eclipse.datatools.connectivity.oda.profile_*.jar"/>
				<exclude name="**/org.eclipse.datatools.connectivity_*/**"/>
				<exclude name="**/org.junit*/**"/>
			</fileset>
		</copy>

		<!--correct web.xml in birt sample, remove *_jsp.class from the viewservlets.jar-->
		<!--move file="${runtime.tmp}/WEB-INF/web_deploy.xml" tofile="${runtime.tmp}/WebViewerExample/WEB-INF/web.xml" /-->
		<unjar src="${runtime.tmp}/WEB-INF/lib/viewservlets.jar" dest="${runtime.tmp}/WEB-INF/lib/viewservlets" />
		<delete file="${runtime.tmp}/WEB-INF/lib/viewservlets.jar" />
		<jar destfile="${runtime.tmp}/WEB-INF/lib/viewservlets.jar" basedir="${runtime.tmp}/WEB-INF/lib/viewservlets" excludes="**/*_jsp.class" />
		<delete dir="${runtime.tmp}/WEB-INF/lib/viewservlets" />
		

		<copy todir="${runtime.tmp}">
			<fileset dir="${template.dir}/birt.runtime.files">
				<include name="*.*" />
			</fileset>
		</copy>
		
		<!-- delete unuse folders and files -->
		<delete dir="${runtime.tmp}/ajax" failonerror="false"/>
		<delete dir="${runtime.tmp}/logs" failonerror="false"/>
		<delete dir="${runtime.tmp}/report" failonerror="false"/>
		<delete dir="${runtime.tmp}/scriptlib" failonerror="false"/>
		<delete file="${runtime.tmp}/WEB-INF/web.xml" failonerror="false"/>
		<delete file="${runtime.tmp}/WEB-INF/web-template.xml" failonerror="false"/>
		<delete file="${runtime.tmp}/WEB-INF/web_deploy.xml" failonerror="false"/>
		
		<delete includeEmptyDirs="true" failonerror="false" >
			<fileset dir="${runtime.tmp}/WEB-INF/platform" includes="lib/**" />
		</delete>
		<copy todir="${runtime.tmp}/WEB-INF/platform/plugins">
			<fileset dir="${deposit}/eclipse/plugins" includes="org.eclipse.birt.report.data.adapter_*.jar"/>
		</copy>
		<zip destfile="${OutputDir}/${wtp.runtime.zip.name}">
			<zipfileset dir="${runtime.tmp}"/>
		</zip>
		<delete dir="${runtime.tmp}" />
	</target>
	
	<target name="createBirtRuntime"  depends="createWAR,createChartViewer">
		<!--   Zip Engine runtime file    -->
		<copy todir="${runtime.tmp}/ChartEngine" flatten="true">
			<fileset dir="${deposit}/eclipse/plugins">
				<patternset refid="chart.runtime.jars" />
				<include name="org.eclipse.birt.chart.device.pdf_*.jar" />
				<exclude name="*.nl1_*/**"/>
				<exclude name="*.nl/**" />
				<exclude name="*.nl1_*.jar"/>
			</fileset>
			<fileset dir="${template.dir}/chart.runtime.libs">
				<include name="*.*" />
			</fileset>
			<fileset dir="${template.dir}/chart.runtime.files">
				<include name="*.*" />
			</fileset>
		</copy>
		<copy todir="${runtime.tmp}/ChartEngine/docs">
			<fileset dir="${template.dir}/chart.docs">
				<include name="*.*" />
			</fileset>
		</copy>
		<copy todir="${runtime.tmp}/ChartEngine" >
			<fileset dir="${deposit}/eclipse/plugins">
				<!--<include name="org.apache.batik_*/**" />-->
				<include name="org.apache.batik.pdf_*/**" />
			</fileset>
			<fileset dir="${baseLocation}/plugins">
				<patternset refid="orbit.include.jars" />
			</fileset>
		</copy>

        <!-- ReportEngine-->
		<copy todir="${runtime.tmp}/ReportEngine" flatten="false">
			<fileset dir="${deposit}/birt_web/org.eclipse.birt.report.viewer/birt_web/WEB-INF/platform">
				<patternset refid="exclude.jars" />
				<exclude name="**/*.nl1_*/**"/>
				<exclude name="**/*.nl/**" />
				<exclude name="**/*.nl1_*.jar"/>
				<exclude name="**/org.junit*/**"/>
			</fileset>
		</copy>
		<!--
		<copy todir="${runtime.tmp}/ReportEngine">
			<fileset dir="${deposit}/birt_web/org.eclipse.birt.report.viewer/birt_web/WEB-INF">
				<include name="lib/*.*" />
			</fileset>
		</copy>
		-->
		<copy todir="${runtime.tmp}/ReportEngine/samples">
			<fileset dir="${template.dir}/engine.runtime.samples">
				<include name="*.*" />
			</fileset>
		</copy>
		
		<copy todir="${runtime.tmp}/ReportEngine/samples">
			<fileset dir="${template.dir}/engine.runtime.samples">
				<include name="*.*" />
			</fileset>
		</copy>

		<copy todir="${runtime.tmp}/ReportEngine">
			<fileset dir="${template.dir}/engine.runtime.bin">
				<include name="*.*" />
			</fileset>
		</copy>
		
		<!-- WebViewerExample-->
		<copy todir="${runtime.tmp}/WebViewerExample">
			<fileset dir="${deposit}/birt_web/org.eclipse.birt.report.viewer/birt_web">
				<patternset refid="exclude.jars" />
			    <exclude name="plugins/**"/>
				<exclude name="images/**" />
				<exclude name="pages/**" />
				<exclude name="styles/**" />
				<exclude name="**/*.nl1_*/**"/>
				<exclude name="**/*.nl/**" />
				<exclude name="**/*.nl1_*.jar"/>
				<exclude name="**/org.junit*/**"/>
			</fileset>
		</copy>

		<!--correct web.xml in birt sample, remove *_jsp.class from the viewservlets.jar-->
		<move file="${runtime.tmp}/WebViewerExample/WEB-INF/web_deploy.xml" tofile="${runtime.tmp}/WebViewerExample/WEB-INF/web.xml" />
		<unjar src="${runtime.tmp}/WebViewerExample/WEB-INF/lib/viewservlets.jar" dest="${runtime.tmp}/WebViewerExample/WEB-INF/lib/viewservlets" />
		<delete file="${runtime.tmp}/WebViewerExample/WEB-INF/lib/viewservlets.jar" />
		<jar destfile="${runtime.tmp}/WebViewerExample/WEB-INF/lib/viewservlets.jar" basedir="${runtime.tmp}/WebViewerExample/WEB-INF/lib/viewservlets" excludes="**/*_jsp.class" />
		<delete dir="${runtime.tmp}/WebViewerExample/WEB-INF/lib/viewservlets" />

		<copy todir="${runtime.tmp}">
			<fileset dir="${template.dir}/birt.runtime.files">
				<include name="*.*" />
			</fileset>
		</copy>
		
		<delete dir="${runtime.tmp}/WebViewerExample/ajax" />
		<delete includeEmptyDirs="true" failonerror="false" >
			<fileset dir="${runtime.tmp}/WebViewerExample/WEB-INF/platform" includes="lib/**" />
		</delete>
		<copy todir="${runtime.tmp}/WebViewerExample/WEB-INF/platform/plugins">
			<fileset dir="${deposit}/eclipse/plugins" includes="org.eclipse.birt.report.data.adapter_*.jar"/>
		</copy>
		<!-- copy extra chartengine, emf has been copied by viewer plugin -->
		<copy todir="${runtime.tmp}/WebViewerExample/WEB-INF/lib">
			<fileset dir="${deposit}/eclipse/plugins" />
			<mapper type="regexp"  from="org.eclipse.birt.chart.engine_.*.jar" to="chartengineapi.jar"/>
		</copy>

		<zip destfile="${OutputDir}/${runtime.zip.name}">
			<zipfileset dir="${runtime.tmp}" prefix="${birt.runtime.dir.prefix}">
			</zipfileset>
			<zipfileset dir="${template.dir}/legal" prefix="${birt.runtime.dir.prefix}">
				<include name="**/*" />
			</zipfileset>
			<zipfileset dir="${template.dir}/birt-runtime-about" prefix="${birt.runtime.dir.prefix}">
				<include name="**/*"/>
			</zipfileset>
		</zip>
		<delete dir="${runtime.tmp}" />
	</target>
	
	<target name="createBirtRCP">
		<!--  Make birt RCP ZIP file-->
		<zip destfile="${OutputDir}/${birt.rcp.zip.name}">
			<zipfileset dir="${deposit}/eclipse/plugins" prefix="${birt.rcp.dir.prefix}/plugins">
				<include name="**/*" />
				<exclude name="org.eclipse.birt.report.designer.ui.ide*/**" />
				<exclude name="org.eclipse.birt.report.designer.ui.samples.ide_*/**" />
				<exclude name="org.eclipse.birt.integration.wtp*/**" />
				<exclude name="org.eclipse.birt.sample.reportitem.rotatedtext*/**" />
				<exclude name="org.eclipse.birt.report.debug.ui*/**" />
				<exclude name="org.eclipse.birt.chart.examples*" />
				<exclude name="org.eclipse.birt.report.designer.ui.editor.xml.wtp*/**" />
				<exclude name="org.eclipse.birt.sdk*/**" />
				<exclude name="org.eclipse.birt.thirdparty*/**"/>
				<exclude name="*.source_*/**" />
				<patternset refid="exclude.jars" />
			</zipfileset>

			<zipfileset dir="${all.in.one.file.dir}/eclipse/plugins" prefix="${birt.rcp.dir.prefix}/plugins">
				<include name="org.eclipse.datatools.*/**" />
				<include name="org.eclipse.datatools.connectivity.*.jar" />
			</zipfileset>

			<zipfileset dir="${deposit}/eclipse/features" prefix="${birt.rcp.dir.prefix}/features">
				<include name="**/*" />
				<exclude name="org.eclipse.birt.sdk*/**" />
				<exclude name="org.eclipse.birt*source*/**" />
				<exclude name="org.eclipse.birt.integration.wtp*/**"/>
				<exclude name="org.eclipse.birt.thirdparty*/**"/>
				<exclude name="org.eclipse.birt.rcp*/**"/>
			</zipfileset>
			
			<zipfileset dir="${RCP.static.file.dir}" prefix="${birt.rcp.dir.prefix}">
				<include name="**/*" />
				<exclude name="**/*datatools*/**" />
				<exclude name="**/datatools*.jar" />
			</zipfileset>
			<zipfileset dir="${template.dir}/legal" prefix="${birt.rcp.dir.prefix}">
				<include name="**/*" />
			</zipfileset>
		</zip>
	</target>
	
	<target name="createSamplePlugin">
		<!--  Make sample plugin ZIP file-->
		<zip destfile="${OutputDir}/${sample.plugin.zip.name}" >
			<zipfileset dir="${deposit}/eclipse/plugins" prefix="${ZipPrefix}">
				<include name="org.eclipse.birt.sample.reportitem.rotatedtext_*.jar" />
			</zipfileset>
			<zipfileset dir="${deposit}/eclipse/plugins" prefix="${ZipPrefix}">
				<include name="org.eclipse.birt.chart.examples_*.jar" />
			</zipfileset>		
			<zipfileset dir="${template.dir}/legal" prefix="eclipse">
				<include name="**/*" />
			</zipfileset>
		</zip>
	</target>
	
	<target name="clean">
		<delete dir="${test.suite.dir}"/>
	</target>	
	
	<target name="createChartViewer">
		<!-- compile chart.viewer -->
		<ant antfile="BuildChartWebViewer.xml" dir="${buildDirectory}/plugins/org.eclipse.birt.chart.viewer" target="Jar">
                        <property name="integrate.dir" value="${buildDirectory}/${buildId}/eclipse"/>
		</ant>
		<!-- export chart.viewer war -->
		<ant antfile="BuildChartWebViewer.xml" dir="${buildDirectory}/plugins/org.eclipse.birt.chart.viewer" target="Export">
			<property name="export.dir" value="${runtime.tmp}" />
                        <property name="integrate.dir" value="${buildDirectory}/${buildId}/eclipse"/>
	        </ant>
	</target>

	<target name="createWAR">
	   <mkdir dir="${runtime.tmp}" />
	   <mkdir dir="${war.tmp}/birt" />
       <copy todir="${war.tmp}/birt">
       		<fileset dir="${deposit}/birt_web/org.eclipse.birt.report.viewer/birt_web" >
       			<exclude name="plugins/**" />
       			<patternset refid="exclude.jars" />
				<exclude name="**/*.nl1_*/**"/>
				<exclude name="**/*.nl/**" />
				<exclude name="**/*.nl1_*.jar"/>
       		</fileset>
       </copy>
       <delete file="${war.tmp}/birt/WEB-INF/web.xml"/>
	   <move file="${war.tmp}/birt/WEB-INF/web_deploy.xml" tofile="${war.tmp}/birt/WEB-INF/web.xml"/>

		<!--remove *_jsp.class from the viewservlets.jar in WAR-->
		<unjar src="${war.tmp}/birt/WEB-INF/lib/viewservlets.jar" dest="${war.tmp}/birt/WEB-INF/lib/viewservlets" />
		<delete file="${war.tmp}/birt/WEB-INF/lib/viewservlets.jar" />
		<jar destfile="${war.tmp}/birt/WEB-INF/lib/viewservlets.jar" basedir="${war.tmp}/birt/WEB-INF/lib/viewservlets" excludes="**/*_jsp.class" />
		<delete dir="${war.tmp}/birt/WEB-INF/lib/viewservlets" />

		<delete dir="${war.tmp}/birt/ajax" failonerror="false" />
		
		<delete includeEmptyDirs="true" failonerror="false" >
			<fileset dir="${war.tmp}/birt/WEB-INF/platform" includes="lib/**" />
		</delete>
		<copy todir="${war.tmp}/birt/WEB-INF/platform/plugins">
			<fileset dir="${deposit}/eclipse/plugins" includes="org.eclipse.birt.report.data.adapter_*.jar"/>
		</copy>
	   <zip destfile="${runtime.tmp}/birt.war">
			<zipfileset dir="${war.tmp}/birt" >
				<include name="**/*" />
				<exclude name="plugin/**" />
				<patternset refid="exclude.jars" />
			</zipfileset>
		</zip>
		<delete dir="${war.tmp}"/>
	</target>
	
	<target name="createNLGroup1" >
		<!-- package NL for Report Designer Full Eclipse Install -->
		<zip destfile="${OutputDir}/${nl.group1.zip.name.allinone}">
			<zipfileset dir="${deposit}/language_pack/plugins" prefix="${ZipPrefix}">
				<include name="*.nl1_*/**" />
				<include name="*.nl1_*.jar" />
			</zipfileset>
		</zip>
		<!-- package NL for Report Designer Full Eclipse Install -->
		<copy file="${OutputDir}/${nl.group1.zip.name.allinone}" tofile="${OutputDir}/${nl.group1.zip.name.framework}"/>
		
		<!-- package NL for RCP -->
		<zip destfile="${OutputDir}/${nl.group1.zip.name.RCP}">
			<zipfileset dir="${deposit}/language_pack/plugins" prefix="${birt.rcp.dir.prefix}/plugins">
				<include name="*.nl1_*/**" />
				<include name="*.nl1_*.jar" />
			</zipfileset>
		</zip>
	</target>
	
	<target name="createNLGroup1Runtime" >
		<zip destfile="${OutputDir}/${nl.group1.zip.name.runtime}">
			<zipfileset dir="${deposit}/language_pack/plugins" prefix="${birt.runtime.dir.prefix}/ChartEngine">
				<include name="org.eclipse.birt.chart.device.extension.nl1_*.jar" />
				<include name="org.eclipse.birt.chart.device.svg.nl1_*.jar" />
				<include name="org.eclipse.birt.chart.engine.extension.nl1_*.jar" />
				<include name="org.eclipse.birt.chart.engine.nl1_*.jar" />
				<include name="org.eclipse.birt.core.nl1_*.jar" />
			</zipfileset>
			<zipfileset dir="${deposit}/language_pack/plugins" prefix="${birt.runtime.dir.prefix}/ReportEngine/plugins">
				<include name="org.eclipse.birt.chart.device.extension.nl1_*.jar" />
				<include name="org.eclipse.birt.chart.device.svg.nl1_*.jar" />
				<include name="org.eclipse.birt.chart.engine.extension.nl1_*.jar" />
				<include name="org.eclipse.birt.chart.engine.nl1_*.jar" />
				<include name="org.eclipse.birt.chart.reportitem.nl1_*.jar" />
				<include name="org.eclipse.birt.report.data.oda.jdbc.nl1_*.jar" />
				<include name="org.eclipse.birt.report.data.oda.sampledb.nl1_*.jar" />
				<include name="org.eclipse.birt.report.data.oda.xml.nl1_*.jar" />
				<include name="org.eclipse.birt.data.nl1_*.jar" />
				<include name="org.eclipse.birt.core.nl1_*.jar" />
				<include name="org.eclipse.birt.report.model.nl1_*.jar" />
				<include name="org.eclipse.birt.report.engine.nl1_*.jar" />
				<include name="org.eclipse.datatools.connectivity.oda.nl1*.jar" />
				<include name="org.eclipse.datatools.connectivity.oda.consumer.nl1*.jar" />
				<include name="org.eclipse.datatools.connectivity.oda.flatfile.nl1*.jar" />
				<include name="org.eclipse.datatools.connectivity.oda.design.nl1*.jar" />
				<include name="org.eclipse.datatools.connectivity.oda.profile.nl1*.jar" />
				<include name="org.eclipse.datatools.enablement.oda.xml.nl1*.jar"/>	
				<include name="org.eclipse.birt.report.viewer.nl1_*.jar" />
			</zipfileset>
			<zipfileset dir="${deposit}/language_pack/plugins" prefix="${birt.runtime.dir.prefix}/WebViewerExample/WEB-INF/platform/plugins">
				<include name="org.eclipse.birt.chart.device.extension.nl1_*.jar" />
				<include name="org.eclipse.birt.chart.device.svg.nl1_*.jar" />
				<include name="org.eclipse.birt.chart.engine.extension.nl1_*.jar" />
				<include name="org.eclipse.birt.chart.engine.nl1_*.jar" />
				<include name="org.eclipse.birt.chart.reportitem.nl1_*.jar" />
				<include name="org.eclipse.birt.report.data.oda.jdbc.nl1_*.jar" />
				<include name="org.eclipse.birt.report.data.oda.sampledb.nl1_*.jar" />
				<include name="org.eclipse.birt.report.data.oda.xml.nl1_*.jar" />
				<include name="org.eclipse.birt.data.nl1_*.jar" />
				<include name="org.eclipse.birt.core.nl1_*.jar" />
				<include name="org.eclipse.birt.report.model.nl1_*.jar" />
				<include name="org.eclipse.birt.report.engine.nl1_*.jar" />
				<include name="org.eclipse.datatools.connectivity.oda.nl1*.jar" />
				<include name="org.eclipse.datatools.connectivity.oda.consumer.nl1*.jar" />
				<include name="org.eclipse.datatools.connectivity.oda.flatfile.nl1*.jar" />
				<include name="org.eclipse.datatools.connectivity.oda.design.nl1*.jar" />
				<include name="org.eclipse.datatools.connectivity.oda.profile.nl1*.jar" />
				<include name="org.eclipse.datatools.enablement.oda.xml.nl1*.jar"/>
			</zipfileset>
			<zipfileset dir="${deposit}/language_pack/plugins" prefix="${birt.runtime.dir.prefix}/WebViewerExample/WEB-INF/lib">
				<include name="org.eclipse.birt.report.viewer.nl1_*.jar" />
			</zipfileset>
		</zip>
	</target>
	<target name="createNLGroup1Chart" >
		<zip destfile="${OutputDir}/${nl.group1.zip.name.chart}">
			<zipfileset dir="${deposit}/language_pack/plugins" prefix="${ZipPrefix}">
				<include name="org.eclipse.birt.chart.device.extension.nl1_*.jar" />
				<include name="org.eclipse.birt.chart.device.swt.nl1_*.jar" />
				<include name="org.eclipse.birt.chart.device.svg.nl1_*.jar" />
				<include name="org.eclipse.birt.chart.engine.extension.nl1_*.jar" />
				<include name="org.eclipse.birt.chart.engine.nl1_*.jar" />
				<include name="org.eclipse.birt.chart.reportitem.nl1_*.jar" />
				<include name="org.eclipse.birt.chart.ui.extension.nl1_*.jar" />
				<include name="org.eclipse.birt.chart.ui.nl1_*.jar" />
				<include name="org.eclipse.birt.core.ui.nl1_*.jar" />
				<include name="org.eclipse.birt.core.nl1_*.jar" />
			</zipfileset>
		</zip>
	</target>
	<target name="createNLGroup1FeatureOverlaySDK" >
		<zip destfile="${OutputDir}/${nl.group1.overlay.zip.name.SDK}">
			<zipfileset dir="${buildDirectory}/${buildLabel}/language_pack/features" prefix="${FeautrePrefix}">
				<include name="**/feature_*.properties" />
			</zipfileset>
		</zip>
	</target>
	<target name="createNLGroup1FeatureOverlayRCP" >
		<zip destfile="${OutputDir}/${nl.group1.overlay.zip.name.RCP}">
			<zipfileset dir="${buildDirectory}/${buildLabel}/language_pack/features" prefix="${birt.rcp.dir.prefix}/features">
				<include name="**/feature_*.properties" />
			</zipfileset>
		</zip>
	</target>
	<target name="createNLGroup1FeatureOverlayFramework" >
		<zip destfile="${OutputDir}/${nl.group1.overlay.zip.name.Framework}">
			<zipfileset dir="${buildDirectory}/${buildLabel}/language_pack/features" prefix="${FeautrePrefix}">
				<include name="**/feature_*.properties" />
			</zipfileset>
		</zip>
	</target>
	<target name="createNLGroup1FeatureOverlayChart" >
		<zip destfile="${OutputDir}/${nl.group1.overlay.zip.name.Chart}">
			<zipfileset dir="${buildDirectory}/${buildLabel}/language_pack/features" prefix="${FeautrePrefix}">
				<include name="org.eclipse.birt.chart*/feature_*.properties" />
				<include name="org.eclipse.birt.chart.runtime*/feature_*.properties" />
			</zipfileset>
		</zip>
	</target>
	<target name="createDatabase">
		 <copy todir="${OutputDir}">
			<fileset dir="${template.dir}/database">
				<include name="*${package.version}*.zip" />
			</fileset>
		 </copy>
	</target>
	
	<target name="createBirtSourceBuild">
		<zip destfile="${OutputDir}/${birt.source.zip.name}">
			<zipfileset dir="${buildDirectory}/plugins" prefix="plugins">
				<include name="**" />
				<exclude name="*test*/**" />
				<exclude name="*.nl/**"/>
				<exclude name="**/@dot/**"/>
				<exclude name="**/*src.zip"/>
				<exclude name="**/temp.folder/**"/>
				<exclude name="*.source/src/**"/>
				<exclude name="*birt*/*.jar"/>
				<exclude name="**/birt_web/**"/>
				<exclude name="*.doc/doc.zip"/>
				<exclude name="*.doc.isv/doc.zip"/>
				<exclude name="*.doc.isv/chart*/**"/>
				<patternset refid="exclude.jars" />
			</zipfileset>
			<zipfileset dir="${buildDirectory}/features" prefix="features">
				<include name="**" />
				<exclude name="**/feature_??_??.properties"/>
				<exclude name="**/feature.temp.folder/**"/>
				<exclude name="*test*/**"/>
				<patternset refid="exclude.jars" />
			</zipfileset>
			<zipfileset dir="${buildDirectory}">
				<include name="directory.txt"/>
				<include name="label.properties"/>
				<include name="fetch_*.xml"/>
				<include name="package.*.xml"/>
				<include name="assemble.*.xml"/>
				<include name="final*Versions.properties"/>
			</zipfileset>
		</zip>
	</target>
	
    <target name="createWTPIntegration" >
       <!--  Make BIRT SDK ZIP file-->
		<zip destfile="${OutputDir}/${wtp.integration.zip.name}">
			<zipfileset dir="${deposit}/eclipse/plugins" prefix="${ZipPrefix}">
				<include name="org.eclipse.birt.integration.wtp*/**" />
				<include name="org.eclipse.birt.report.designer.ui.editor.xml.wtp*/**"/>
			</zipfileset>
			<zipfileset dir="${deposit}/eclipse/features" prefix="${FeautrePrefix}">
				<include name="org.eclipse.birt.integration.wtp*/*" />
			</zipfileset>
			<zipfileset dir="${template.dir}/legal" prefix="eclipse">
				<include name="**/*" />
			</zipfileset>
		</zip>
    </target>

	<target name="createChartRuntime">
		<mkdir dir="${chart.tmp}" />
		<copy todir="${chart.tmp}/plugins">
			<fileset dir="${deposit}/eclipse/plugins">
				<patternset refid="chart.runtime.plugins" />
				<patternset refid="exclude.jars" />
				<include name="org.eclipse.birt.chart.device.pdf*.jar" />
				<!--<include name="org.apache.batik_*/**"/>-->
				<include name="org.apache.batik.pdf_*/**"/>
				<patternset refid="orbit.include.jars" />
			</fileset>
		</copy>
		

		<!--   Zip Chart runtime file    -->
		<zip destfile="${OutputDir}/${charts.zip.name}">
			<zipfileset dir="${chart.tmp}" prefix="eclipse">
			</zipfileset>
			<zipfileset dir="${template.dir}/legal" prefix="eclipse">
				<include name="**/*" />
			</zipfileset>
			<zipfileset dir="${deposit}/eclipse/features" prefix="${FeautrePrefix}">
				<include name="org.eclipse.birt.chart*/*" />
				<include name="org.mozilla.rhino*/*" />
				<include name="org.apache.commons.codec*/*" />
				<include name="org.apache.batik.pdf_*/**"/>
				<exclude name="*.source*/*" />
			</zipfileset>
		</zip>
		<delete dir="${chart.tmp}" />
	</target>

	<!--////////////////////////////////////////////////////-->
	<!--////////////////////////////////////////////////////-->
	<!--////////////////////////////////////////////////////-->
	<target name="replace_chart" if="chartfailure">
		<!--replace file="${workingDir}\${birt.info}" token="chartOK=true" value="${chartfailure}">
		</replace-->
	</target>
	<target name="replace_engine" if="enginefailure">
		<!--replace file="${workingDir}\${birt.info}" token="engineOK=true" value="${enginefailure}">
		</replace-->
	</target>
	<target name="replace_model" if="modelfailure">
		<!--replace file="${workingDir}\${birt.info}" token="modelOK=true" value="${modelfailure}">
		</replace-->
	</target>
	<target name="replace_designer" if="designerfailure">
		<!--replace file="${workingDir}\${birt.info}" token="designerOK=true" value="${designerfailure}">
		</replace-->
	</target>
	<target name="replace_data" if="datafailure">
		<!--replace file="${workingDir}\${birt.info}" token="dataOK=true" value="${datafailure}">
		</replace-->
	</target>

	<condition property="build.fromlocal">
		<and>
			<istrue value="${fromlocal}" />
		</and>
	</condition>

</project>

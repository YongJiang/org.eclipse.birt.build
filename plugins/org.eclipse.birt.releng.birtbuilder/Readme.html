<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<title>README</title>
</head>

<body>

<p><b><font size="+2">README</font></b></p>
<p>Last Updated: December 4, 2006</p>
<p>This document describes how to build Business Intelligence and Reporting 
Tool(BIRT) components from the command line using Ant scripts in this project 
and org.eclipse.releng.basebuilder.</p>
<p><br>
<b>Table of Contents</b><br>
　</p>
<p><a href="#description">Description</a><br>
<a href="#prereq">Prerequisites</a><br>
<a href="#setup">Setup</a><br>
<a href="#components">Run the Build</a><br>
<a href="#antbuildproperties">Ant properties defined in build.properties</a><br>
<a href="#examples">Examples</a><br>
　</p>
<p><b><a name="description">Description</a></b></p>
<p>org.eclipse.birt.releng.birtbuilder contains Ant scripts that invoke script 
generators in org.eclipse.pde.build to build all shipped <a href="#components">
components of Birt:</a> SDK,tests and Language Packs.<br>
　</p>
<p><b><a name="prereq">Prerequisites</a></b></p>
<p>1. <a href="http://www.cvshome.org/">CVS</a> version 1.10 or higher.<br>
2. <a href="http://java.sun.com/j2se/1.4/download.html">1.4 level JDK</a>.<br>
3. <a href="http://www.info-zip.org/pub/infozip/">Info-Zip zip and unzip</a><br>
5. org.eclipse.releng.basebuilder and org.eclipse.birt.releng.birtbuilder from
<a href="http://dev.eclipse.org/viewcvs/">dev.eclipse.org</a>.<br>
　</p>
<p><b><a name="setup">Setup</a><br>
<br>
</b>1. Add the zip, unzip, tar, gzip and cvs executables to your path as 
required.<br>
2. Add the jre/bin directory of the installed JDK to your path.<b><br>
</b>3. Check out org.eclipse.releng.basebuilder and 
org.eclipse.birt.releng.birtbuilder into a directory.<br>
4. Download Eclipse 3.2.1 SDK release and unzip into a directory as baseLocation.<br>
5. Download Wtp 1.5.2 Release/EMF /GEF /DTP release and unzip into baseLocation.<br>
　</p>
<p><b><a name="components">Run the Build</a></b></p>
<p>cd to org.eclipse.birt.releng.eclipsebuilder directory and execute the 
following command (currently the build.xml script can only be executed in a 
headless eclipse due to
<a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=35923">bug 35923</a>):
</p>
<p>&quot;java -cp ../org.eclipse.releng.basebuilder/startup.jar 
org.eclipse.core.launcher.Main -application org.eclipse.ant.core.antRunner -buildfile 
build.xml -Dcomponent=&lt;component name specified in table below&gt; [Ant properties 
to override in a <a href="#antbuildproperties">component's build.properties</a>] 
&quot;<br>
　</p>
<p>The component property value sets the name of the directory in 
org.eclipse.releng.eclipsebuilder which contains the Ant scripts that build a 
given an Eclipse component as descibed below: <br>
　</p>
<table width="100%" border="1">
  <tr>
    <td width="20%">Component (directory name in 
    org.eclipse.birt.releng.birtbuilder)</td>
    <td width="80%">Description</td>
  </tr>
  <tr>
    <td width="20%">birt</td>
    <td width="80%">This directory contains the scripts used to build any or all 
    configurations of the BIRT framework SDK. An BIRT SDK is comprised of 
    binaries, source, user and developer documentation for the BIRT framework.</td>
  </tr>
  <tr>
    <td width="20%">birt.third.party</td>
    <td width="80%">This directory contains the scripts used to build any or all 
    configurations of the Third Party plugins used by BIRT, without source and 
    developer documentation.</td>
  </tr>
  <tr>
    <td width="20%">rcp</td>
    <td width="80%">This directory contains the scripts used to build any or all 
    configuration of the BIRT RCP plug-ins.</td>
  </tr>
  <tr>
    <td width="20%" height="41">birt.tests</td>
    <td width="80%" height="41">This directory contains the scripts used to 
    build the BIRT Automated testing environment which contains the test 
    framework plug-ins, JUnit test plug-ins, and scripts used to launch the 
    JUnit tests from the command line.</td>
  </tr>
  <tr>
    <td width="20%" height="41">birt.nl</td>
    <td width="80%" height="41">This directory contains the scripts used to 
    build the Language Packs for BIRT.</td>
  </tr>
</table>
<p><b><a name="antbuildproperties">Ant Properties Settings in a component's build.properties</a><br>
<br>
</b>The following properties are pre-defined in the build.properties file for 
the specified component. They can be overridden by setting them at the command 
line at build time or by changing them directly in the component's 
build.properties file.</p>
<table width="100%" border="1" height="1028">
  <tr>
    <td height="16">Name</td>
    <td height="16">Description</td>
  </tr>
  <tr>
    <td height="32">baseos,basews,basearch</td>
    <td height="32">The os, ws and arch values of a pre-built eclipse component 
    being compiled against. Currently BIRT use *,*,*</td>
  </tr>
  <tr>
    <td height="42">baseLocation</td>
    <td height="42">A directory separate from buildDirectory which contains 
    pre-built plugins and features against which to compile. The basedirectory 
    must not contain any features, plugins or fragments which are already or 
    will be located in the buildDirectory (see below).</td>
  </tr>
  <tr>
    <td height="32">bootclasspath</td>
    <td height="32">Sets the value for the attribute &quot;bootclasspath&quot; in calls to the
    <a href="http://ant.apache.org/manual/CoreTasks/javac.html">Ant &lt;javac&gt; task</a> 
    in a plugins' build.xml. Default set to ${java.home}/lib/rt.jar.</td>
  </tr>
  <tr>
    <td height="64">buildDirectory</td>
    <td height="64">The absolute path to a working directory where the source 
    for the build will be exported, where scripts will be generated and where 
    the end products of the build will be located. On Windows systems, the path 
    length should not exceed thirty characters due to path length limitations 
    when compiling some classes in eclipse.</td>
  </tr>
  <tr>
    <td height="16">buildId</td>
    <td height="16">The build name. Default set to &quot;build&quot;.</td>
  </tr>
  <tr>
    <td height="48">buildLabel</td>
    <td height="48">Refers to the name of the directory which will contain the end result of 
    the build. Default set to v${buildId}, ie.&quot;vbuild&quot;. This 
    directory will be created inside the location specified by the ${buildDirectory} 
    property.</td>
  </tr>
  <tr>
    <td height="180">buildType</td>
    <td height="180">Letters I, N, S, R or M are used in Eclipse builds to identify builds as 
    being one of the following:<br>
    <br>
    I - Integration<br>
    N - Nightly<br>
    S - Stable<br>
    R - Release<br>
    M - Maintenance<br>
　<p>If set to N, all source will be checked out from the HEAD stream. In all 
    other cases, tags as specifed in map files will be used when exporting 
    plugins to the buildDirectory. </td>
  </tr>
  <tr>
    <td height="64">configs</td>
    <td height="64">&nbsp;BIRT use *,*,* in birtbuilder, which indicates platform independence.</td>
  </tr>
  <tr>
    <td height="32">javacDebugInfo</td>
    <td height="32">Sets the value for the attribute &quot;debug&quot; in calls to the
    <a href="http://ant.apache.org/manual/CoreTasks/javac.html">Ant &lt;javac&gt; task
    </a>in a plugins' build.xml. Default set to on.</td>
  </tr>
  <tr>
    <td height="32">javacFailOnError</td>
    <td height="32">Sets the value for the attribute &quot;failonerror&quot; in calls to the
    <a href="http://ant.apache.org/manual/CoreTasks/javac.html">Ant &lt;javac&gt; task</a> 
    in a plugins' build.xml. Build will continue even if there are compilation 
    errors when this is set to false.</td>
  </tr>
  <tr>
    <td height="32">javacSource</td>
    <td height="32">Sets the value for the attribute &quot;source&quot; in calls to the
    <a href="http://ant.apache.org/manual/CoreTasks/javac.html">Ant &lt;javac&gt; task</a> 
    in a plugins' build.xml. Default set to 1.3.</td>
  </tr>
  <tr>
    <td height="32">javacTarget</td>
    <td height="32">Sets the value for the attribute &quot;target&quot; in calls to the
    <a href="http://ant.apache.org/manual/CoreTasks/javac.html">Ant &lt;javac&gt; task</a> 
    in a plugins' build.xml. Default set to 1.1.</td>
  </tr>
  <tr>
    <td height="32">javacVerbose</td>
    <td height="32">Sets the value for the attribute &quot;verbose&quot; in calls to the
    <a href="http://ant.apache.org/manual/CoreTasks/javac.html">Ant &lt;javac&gt; task</a> 
    in a plugins' build.xml. Default set to true.</td>
  </tr>
  <tr>
    <td height="132">mapVersionTag</td>
    <td height="132">Sets the tag attribute in a call to the
    <a href="http://ant.apache.org/manual/CoreTasks/cvs.html">Ant &lt;cvs&gt; task </a>
    to check out org.eclipse.birt.releng, the map file project on dev.eclipse.org 
    used in the build.<p>Can be set to a specific tag to download the map files 
    used for a previous integration build. Typically, these tags are in the form 
    &quot;v&lt;date/timestamp&gt;&quot; for example &quot;v200307110800&quot; will checkout the map files 
    used to run the integration at the specified date/time. </td>
  </tr>
  <tr>
    <td height="16">zipargs</td>
    <td height="16">Arguments to send to the zip executable. ie. zipargs=-y on Linux 
    preserves symbolic links.</td>
  </tr>
</table>
<p><b><a name="examples">Examples</a><br>
<br>
</b><a href="#ex1">Build BIRT on Linux</a><br>
　</p>
<p><b><a name="ex1">Build BIRT SDK component on Linux</a></b></p>
<p><b>java -cp ..\org.eclipse.releng.basebuilder\startup.jar 
org.eclipse.core.launcher.Main -application org.eclipse.ant.core.antRunner -buildfile 
build.xml -Dcomponent=birt.third.party -Dconfigs=&quot;*,*,*&quot; -Djavacfailonerror=true -DjavacVerbose=false 
-DbuildDirectory=/home/adb/releng/src</b> <b>-baseLocation=/home/adb/releng/baseLocaton 
-Dzipargs=-y</b> <b>-Dbootclasspath=/builds/windows/jre/lib/rt.jar</b><br>
　</p>

<p><b>java -cp ..\org.eclipse.releng.basebuilder\startup.jar 
org.eclipse.core.launcher.Main -application org.eclipse.ant.core.antRunner -buildfile 
build.xml -Dcomponent=birt -Dconfigs=&quot;*,*,*&quot; -Djavacfailonerror=true -DjavacVerbose=false 
-DbuildDirectory=/home/adb/src</b> <b>-Dzipargs=-y -Dbootclasspath=/builds/windows/jre/lib/rt.jar</b><br>
<br>
<br>
This builds an third party package used in BIRT first only in the directory
<a href="file:///c:/mybuild">/home/adb/releng/src</a> with name &quot;birt-third-party-${package.version}.zip&quot;. 
Then the following command will build birt framework-SDK package in
<a href="file:///c:/mybuild">/home/adb/releng/src</a> with name&quot;&quot;. 
birt-report-framework-sdk-${package.version}.zip. &quot;-DjavaVerbose=false&quot; indicates that no compile logs will be 
generated and &quot;-Djavacfailonerror=true&quot; will cause the build to fail if there 
are any compile errors. <br>
　</p>

</body>

</html>